#request-method
  .row
    .col-md-12
      %h3(id="#{request_method.title.parameterize}")
        = request_method.title
        - if @editing_mode && current_user
          = link_to edit_chapter_section_request_method_path(chapter, section, request_method), class: 'action', id: "method-#{request_method.title.parameterize}" do
            = fa_icon "edit"
          - if current_user
            = link_to request_method_ping_path(request_method.id), class: 'action' do
              = fa_icon "refresh"
            = link_to "{..}", request_method_parameters_path(request_method), class: 'action'
          = link_to chapter_section_request_method_path(chapter, section, request_method), class: 'action', method: :delete do
            = fa_icon "times"
  .row
    .col-md-7
      - if request_method.description
        %h6 Description
        = Kramdown::Document.new(request_method.description).to_html.html_safe

    .col-md-5
      %h6 Path
      %code= request_method.path
  - if request_method.parameters.any?
    .row
      .col-md-12
        = render partial: "request_methods/test_params", locals: { request_method: request_method }

  .row
    .col-md-6
      .request
        .title
          Request
          = fa_icon "arrow-right"
        .body
          %pre= request_method.request_content
      .request
        .title
          Request
          = fa_icon "arrow-right"
          CURL
        .body
          %pre= request_method.curl
    .col-md-6
      - if request_method.response_body.present?
        .response
          .title
            Response
            = fa_icon "arrow-left"
            - if request_method.response_code.present?
              = surround("(", ")") do
                = request_method.response_code
          .body
            %pre= JSON.pretty_generate(JSON.parse(request_method.response_body)) rescue request_method.response_body

